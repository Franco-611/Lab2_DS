<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>laboratorio2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Laboratorio2_files/libs/clipboard/clipboard.min.js"></script>
<script src="Laboratorio2_files/libs/quarto-html/quarto.js"></script>
<script src="Laboratorio2_files/libs/quarto-html/popper.min.js"></script>
<script src="Laboratorio2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Laboratorio2_files/libs/quarto-html/anchor.min.js"></script>
<link href="Laboratorio2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Laboratorio2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Laboratorio2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Laboratorio2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Laboratorio2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="laboratorio-2---series-de-tiempo" class="level1">
<h1>Laboratorio 2 - Series de tiempo</h1>
<ul>
<li>Diego Jose Franco 20240</li>
<li>Juan Diego Avila 20090</li>
</ul>
<section id="precios-promedio-nacionales-diarios" class="level2">
<h2 class="anchored" data-anchor-id="precios-promedio-nacionales-diarios">1.1 - Precios Promedio Nacionales Diarios</h2>
<section id="carga-de-datos" class="level3">
<h3 class="anchored" data-anchor-id="carga-de-datos">Carga de datos</h3>
<div class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargamos los datos</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>precios_promedio_2021 <span class="op">=</span> pd.read_csv(<span class="st">'./Data/Precios-Promedio-Nacionales-Diarios-2021.csv'</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>precios_promedio_2022 <span class="op">=</span> pd.read_csv(<span class="st">'./Data/Precios-Promedio-Nacionales-Diarios-2022.csv'</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>precios_promedio_2023 <span class="op">=</span> pd.read_csv(<span class="st">'./Data/Precios-Promedio-Nacionales-Diarios-2023.csv'</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Se renombra la ultima columna a Glp Cilindro Lbs.</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>precios_promedio_2021.rename(columns<span class="op">=</span>{<span class="st">'Unnamed: 7'</span>: <span class="st">'Glp Cilindro Lbs.'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>precios_promedio_2022.rename(columns<span class="op">=</span>{<span class="st">'Unnamed: 7'</span>: <span class="st">'Glp Cilindro Lbs.'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>precios_promedio_2023.rename(columns<span class="op">=</span>{<span class="st">'Unnamed: 7'</span>: <span class="st">'Glp Cilindro Lbs.'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Se unen los tres dataframes en uno solo</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>precios_promedio <span class="op">=</span> pd.concat([precios_promedio_2021, precios_promedio_2022, precios_promedio_2023])</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Se eliminan las columnas que no se van a utilizar</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>precios_promedio <span class="op">=</span> precios_promedio.drop(columns<span class="op">=</span>[<span class="st">'Bunker'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="analisis-exploratorio" class="level3">
<h3 class="anchored" data-anchor-id="analisis-exploratorio">Analisis exploratorio</h3>
<div class="cell" data-execution_count="88">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>precios_promedio.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="88">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>FECHA</th>
      <th>Tipo de Cambio</th>
      <th>Superior</th>
      <th>Regular</th>
      <th>Diesel</th>
      <th>Glp Cilindro 25Lbs.</th>
      <th>Glp Cilindro Lbs.</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1-ene-21</td>
      <td>7.79382</td>
      <td>21.91</td>
      <td>21.11</td>
      <td>17.61</td>
      <td>99.0</td>
      <td>3.96</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2-ene-21</td>
      <td>7.79382</td>
      <td>21.91</td>
      <td>21.11</td>
      <td>17.61</td>
      <td>99.0</td>
      <td>3.96</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3-ene-21</td>
      <td>7.79382</td>
      <td>21.91</td>
      <td>21.11</td>
      <td>17.61</td>
      <td>99.0</td>
      <td>3.96</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4-ene-21</td>
      <td>7.79417</td>
      <td>21.91</td>
      <td>21.11</td>
      <td>17.61</td>
      <td>99.0</td>
      <td>3.96</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5-ene-21</td>
      <td>7.79369</td>
      <td>21.91</td>
      <td>21.11</td>
      <td>17.61</td>
      <td>99.0</td>
      <td>3.96</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="89">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>precios_promedio.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 948 entries, 0 to 217
Data columns (total 7 columns):
 #   Column               Non-Null Count  Dtype  
---  ------               --------------  -----  
 0   FECHA                948 non-null    object 
 1   Tipo de Cambio       944 non-null    float64
 2   Superior             948 non-null    float64
 3   Regular              948 non-null    float64
 4   Diesel               948 non-null    float64
 5   Glp Cilindro 25Lbs.  948 non-null    float64
 6   Glp Cilindro Lbs.    948 non-null    float64
dtypes: float64(6), object(1)
memory usage: 59.2+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>precios_promedio.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="90">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Tipo de Cambio</th>
      <th>Superior</th>
      <th>Regular</th>
      <th>Diesel</th>
      <th>Glp Cilindro 25Lbs.</th>
      <th>Glp Cilindro Lbs.</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>944.000000</td>
      <td>948.000000</td>
      <td>948.000000</td>
      <td>948.000000</td>
      <td>948.000000</td>
      <td>948.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>7.761312</td>
      <td>32.364916</td>
      <td>31.208502</td>
      <td>28.503059</td>
      <td>123.723745</td>
      <td>4.949061</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.059130</td>
      <td>4.552204</td>
      <td>4.221649</td>
      <td>6.040627</td>
      <td>8.442288</td>
      <td>0.337845</td>
    </tr>
    <tr>
      <th>min</th>
      <td>7.650900</td>
      <td>21.910000</td>
      <td>21.110000</td>
      <td>17.610000</td>
      <td>99.000000</td>
      <td>3.960000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>7.719990</td>
      <td>28.790000</td>
      <td>27.990000</td>
      <td>23.090000</td>
      <td>120.000000</td>
      <td>4.800000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>7.738020</td>
      <td>33.300000</td>
      <td>31.840000</td>
      <td>27.980000</td>
      <td>122.000000</td>
      <td>4.880000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>7.807210</td>
      <td>35.572500</td>
      <td>34.260000</td>
      <td>33.750000</td>
      <td>122.000000</td>
      <td>4.880000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>7.930240</td>
      <td>43.240000</td>
      <td>40.500000</td>
      <td>41.270000</td>
      <td>147.000000</td>
      <td>5.880000</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(precios_promedio.isnull().<span class="bu">sum</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>FECHA                  0
Tipo de Cambio         4
Superior               0
Regular                0
Diesel                 0
Glp Cilindro 25Lbs.    0
Glp Cilindro Lbs.      0
dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="92">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>cuantitativas <span class="op">=</span> [</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Tipo de Cambio"</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Superior"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Regular"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Diesel"</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Glp Cilindro 25Lbs."</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Glp Cilindro Lbs."</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>precios_promedio_cuantitativas <span class="op">=</span> precios_promedio[cuantitativas]</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>cr <span class="op">=</span> precios_promedio_cuantitativas.corr()</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>sns.heatmap(cr, annot<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">"YlGnBu"</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-7-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>precios_promedio_cuantitativas.reset_index(drop<span class="op">=</span><span class="va">True</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>grid <span class="op">=</span> sns.pairplot(precios_promedio_cuantitativas)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-8-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="94">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> cuantitativas:</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(x <span class="op">=</span> precios_promedio[col])</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-9-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-9-output-2.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-9-output-3.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-9-output-4.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-9-output-5.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-9-output-6.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="95">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>meses_dict <span class="op">=</span> {</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'ene'</span>: <span class="st">'01'</span>, <span class="st">'feb'</span>: <span class="st">'02'</span>, <span class="st">'mar'</span>: <span class="st">'03'</span>, <span class="st">'abr'</span>: <span class="st">'04'</span>, <span class="st">'may'</span>: <span class="st">'05'</span>, <span class="st">'jun'</span>: <span class="st">'06'</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'jul'</span>: <span class="st">'07'</span>, <span class="st">'ago'</span>: <span class="st">'08'</span>, <span class="st">'sep'</span>: <span class="st">'09'</span>, <span class="st">'oct'</span>: <span class="st">'10'</span>, <span class="st">'nov'</span>: <span class="st">'11'</span>, <span class="st">'dic'</span>: <span class="st">'12'</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> reemplazar_mes(fecha):</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    partes <span class="op">=</span> fecha.split(<span class="st">'-'</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    partes[<span class="dv">1</span>] <span class="op">=</span> meses_dict[partes[<span class="dv">1</span>]]</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">'-'</span>.join(partes)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>precios_promedio[<span class="st">'FECHA'</span>] <span class="op">=</span> precios_promedio[<span class="st">'FECHA'</span>].<span class="bu">apply</span>(reemplazar_mes)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(precios_promedio[<span class="st">'FECHA'</span>])</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>precios_promedio[<span class="st">'FECHA'</span>] <span class="op">=</span> pd.to_datetime(precios_promedio[<span class="st">'FECHA'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">'</span><span class="sc">%d</span><span class="st">-%m-%y'</span>)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>precios_promedio[<span class="st">'AÑO'</span>] <span class="op">=</span> precios_promedio[<span class="st">'FECHA'</span>].dt.year</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>precios_promedio[<span class="st">'MES'</span>] <span class="op">=</span> precios_promedio[<span class="st">'FECHA'</span>].dt.month</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>grupo <span class="op">=</span> precios_promedio.groupby([<span class="st">'AÑO'</span>]).mean()</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>tendencia <span class="op">=</span> grupo[cuantitativas]</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>tendencia <span class="op">=</span> tendencia.reset_index()</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> columna <span class="kw">in</span> cuantitativas:</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>    plt.plot(tendencia[<span class="st">"AÑO"</span>], tendencia[columna], label<span class="op">=</span>columna)</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Año'</span>)</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Precio Promedio'</span>)</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Tendencia de Precios de Gasolina por Año'</span>)</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0      1-01-21
1      2-01-21
2      3-01-21
3      4-01-21
4      5-01-21
        ...   
213    2-08-23
214    3-08-23
215    4-08-23
216    5-08-23
217    6-08-23
Name: FECHA, Length: 948, dtype: object</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Juan_Avila\AppData\Local\Temp\ipykernel_21904\1656127391.py:19: FutureWarning: The default value of numeric_only in DataFrameGroupBy.mean is deprecated. In a future version, numeric_only will default to False. Either specify numeric_only or select only columns which should be valid for the function.
  grupo = precios_promedio.groupby(['AÑO']).mean()</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-10-output-3.png" class="img-fluid"></p>
</div>
</div>
<p>Se puede observar que el precio de gasolina por año ha sido bastante constante en los años, con un incremento de casi el doble en el 2022, que se ha reducido muy poco hasta la actualidad en el 2023.</p>
<div class="cell" data-execution_count="96">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>grupo <span class="op">=</span> precios_promedio.groupby([<span class="st">'MES'</span>]).mean()</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>tendencia <span class="op">=</span> grupo[cuantitativas]</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>tendencia <span class="op">=</span> tendencia.reset_index()</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> columna <span class="kw">in</span> cuantitativas:</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    plt.plot(tendencia[<span class="st">"MES"</span>], tendencia[columna], label<span class="op">=</span>columna)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Mes'</span>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Precio Promedio'</span>)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Tendencia de Precios de Gasolina por Mes'</span>)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Juan_Avila\AppData\Local\Temp\ipykernel_21904\1760609747.py:1: FutureWarning: The default value of numeric_only in DataFrameGroupBy.mean is deprecated. In a future version, numeric_only will default to False. Either specify numeric_only or select only columns which should be valid for the function.
  grupo = precios_promedio.groupby(['MES']).mean()</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-11-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Se puede observar que realmente no existe mucha variacion entre los valores de los combustibles durante los meses. Pero se puede destacar que los meses en donde el precio es mayor son a final de año, en los meses de noviembre y diciembre. Además de ello se puede notar que el gas liacuado siempre se mantiene con precios bajos.</p>
<div class="cell" data-execution_count="97">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> normaltest</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>norm <span class="op">=</span> precios_promedio_cuantitativas.<span class="bu">apply</span>(normaltest)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de test de normalidad: </span><span class="ch">\n</span><span class="st">"</span>, norm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Resultados de test de normalidad: 
    Tipo de Cambio   Superior   Regular        Diesel  Glp Cilindro 25Lbs.  \
0             NaN  13.693900  8.744152  1.781288e+02         6.549501e+01   
1             NaN   0.001063  0.012625  2.088471e-39         5.997065e-15   

   Glp Cilindro Lbs.  
0       6.565420e+01  
1       5.538240e-15  </code></pre>
</div>
</div>
</section>
</section>
<section id="consumo-de-combustible" class="level2">
<h2 class="anchored" data-anchor-id="consumo-de-combustible">1.2 - Consumo de Combustible</h2>
<section id="carga-de-datos-1" class="level3">
<h3 class="anchored" data-anchor-id="carga-de-datos-1">Carga de datos</h3>
<div class="cell" data-execution_count="98">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargamos los datos</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>consumo <span class="op">=</span> pd.read_csv(<span class="st">'./Data/CONSUMO.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="analisis-exploratorio-1" class="level3">
<h3 class="anchored" data-anchor-id="analisis-exploratorio-1">Analisis exploratorio</h3>
<div class="cell" data-execution_count="99">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>consumo.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="99">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Fecha</th>
      <th>Gas licuado de petróleo</th>
      <th>Gasolina regular</th>
      <th>Gasolina superior</th>
      <th>Diesel alto azufre</th>
      <th>Total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ene-00</td>
      <td>194,410.48</td>
      <td>202,645.20</td>
      <td>308,156.82</td>
      <td>634,667.06</td>
      <td>1,750,544.64</td>
    </tr>
    <tr>
      <th>1</th>
      <td>feb-00</td>
      <td>174,710.55</td>
      <td>205,530.96</td>
      <td>307,766.31</td>
      <td>642,380.66</td>
      <td>1,773,220.22</td>
    </tr>
    <tr>
      <th>2</th>
      <td>mar-00</td>
      <td>189,234.07</td>
      <td>229,499.56</td>
      <td>331,910.29</td>
      <td>699,807.25</td>
      <td>1,909,498.79</td>
    </tr>
    <tr>
      <th>3</th>
      <td>abr-00</td>
      <td>174,330.61</td>
      <td>210,680.40</td>
      <td>315,648.08</td>
      <td>586,803.98</td>
      <td>1,800,932.86</td>
    </tr>
    <tr>
      <th>4</th>
      <td>may-00</td>
      <td>191,745.15</td>
      <td>208,164.34</td>
      <td>319,667.97</td>
      <td>656,948.20</td>
      <td>1,941,771.90</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="100">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>consumo.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 281 entries, 0 to 280
Data columns (total 6 columns):
 #   Column                   Non-Null Count  Dtype 
---  ------                   --------------  ----- 
 0   Fecha                    281 non-null    object
 1   Gas licuado de petróleo  281 non-null    object
 2   Gasolina regular         281 non-null    object
 3   Gasolina superior        281 non-null    object
 4   Diesel alto azufre       281 non-null    object
 5   Total                    281 non-null    object
dtypes: object(6)
memory usage: 13.3+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="101">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>consumo.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="101">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Fecha</th>
      <th>Gas licuado de petróleo</th>
      <th>Gasolina regular</th>
      <th>Gasolina superior</th>
      <th>Diesel alto azufre</th>
      <th>Total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>281</td>
      <td>281</td>
      <td>281</td>
      <td>281</td>
      <td>281</td>
      <td>281</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>281</td>
      <td>281</td>
      <td>281</td>
      <td>281</td>
      <td>281</td>
      <td>281</td>
    </tr>
    <tr>
      <th>top</th>
      <td>ene-00</td>
      <td>194,410.48</td>
      <td>202,645.20</td>
      <td>308,156.82</td>
      <td>634,667.06</td>
      <td>1,750,544.64</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="102">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>cuantitativas <span class="op">=</span> [<span class="st">"Gasolina regular"</span>, <span class="st">"Gasolina superior"</span>, <span class="st">"Diesel alto azufre"</span>, <span class="st">"Gas licuado de petróleo"</span>, <span class="st">"Total"</span>]</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># casteamos las variables a float</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> cuantitativas:</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    consumo[col] <span class="op">=</span> consumo[col].<span class="bu">str</span>.replace(<span class="st">','</span>, <span class="st">''</span>).astype(<span class="bu">float</span>)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>consumo_numericas <span class="op">=</span> consumo[cuantitativas]</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>correlation_matrix <span class="op">=</span> consumo_numericas.corr()</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el diagrama de correlación utilizando Seaborn</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>sns.heatmap(correlation_matrix, annot<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">'coolwarm'</span>, fmt<span class="op">=</span><span class="st">'.2f'</span>, linewidths<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Diagrama de Correlación'</span>)</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-17-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="103">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> cuantitativas:</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(x <span class="op">=</span> consumo_numericas[col])</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-18-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-18-output-2.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-18-output-3.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-18-output-4.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-18-output-5.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="104">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>grid <span class="op">=</span> sns.pairplot(consumo_numericas)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-19-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="105">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>años_dict <span class="op">=</span> {</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'00'</span>: <span class="st">'2000'</span>, <span class="st">'01'</span>: <span class="st">'2001'</span>, <span class="st">'02'</span>: <span class="st">'2002'</span>, <span class="st">'03'</span>: <span class="st">'2003'</span>, <span class="st">'04'</span>: <span class="st">'2004'</span>, <span class="st">'05'</span>: <span class="st">'2005'</span>,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'06'</span>: <span class="st">'2006'</span>, <span class="st">'07'</span>: <span class="st">'2007'</span>, <span class="st">'08'</span>: <span class="st">'2008'</span>, <span class="st">'09'</span>: <span class="st">'2009'</span>, <span class="st">'10'</span>: <span class="st">'2010'</span>, <span class="st">'11'</span>: <span class="st">'2011'</span>,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'12'</span>: <span class="st">'2012'</span>, <span class="st">'13'</span>: <span class="st">'2013'</span>, <span class="st">'14'</span>: <span class="st">'2014'</span>, <span class="st">'15'</span>: <span class="st">'2015'</span>, <span class="st">'16'</span>: <span class="st">'2016'</span>, <span class="st">'17'</span>: <span class="st">'2017'</span>,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'18'</span>: <span class="st">'2018'</span>, <span class="st">'19'</span>: <span class="st">'2019'</span>, <span class="st">'20'</span>: <span class="st">'2020'</span>, <span class="st">'21'</span>: <span class="st">'2021'</span>, <span class="st">'22'</span>: <span class="st">'2022'</span>, <span class="st">'23'</span>: <span class="st">'2023'</span>,</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>meses_dict <span class="op">=</span> {</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'ene'</span>: <span class="st">'01'</span>, <span class="st">'feb'</span>: <span class="st">'02'</span>, <span class="st">'mar'</span>: <span class="st">'03'</span>, <span class="st">'abr'</span>: <span class="st">'04'</span>, <span class="st">'may'</span>: <span class="st">'05'</span>, <span class="st">'jun'</span>: <span class="st">'06'</span>,</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'jul'</span>: <span class="st">'07'</span>, <span class="st">'ago'</span>: <span class="st">'08'</span>, <span class="st">'sep'</span>: <span class="st">'09'</span>, <span class="st">'oct'</span>: <span class="st">'10'</span>, <span class="st">'nov'</span>: <span class="st">'11'</span>, <span class="st">'dic'</span>: <span class="st">'12'</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> reemplazar_mes(fecha):</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    partes <span class="op">=</span> fecha.split(<span class="st">'-'</span>)</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    partes[<span class="dv">0</span>] <span class="op">=</span> meses_dict[partes[<span class="dv">0</span>]]</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    partes[<span class="dv">1</span>] <span class="op">=</span> años_dict[partes[<span class="dv">1</span>]]</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">'-'</span>.join(partes)</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>consumo[<span class="st">'Fecha'</span>] <span class="op">=</span> consumo[<span class="st">'Fecha'</span>].<span class="bu">apply</span>(reemplazar_mes)</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>consumo[<span class="st">'Fecha'</span>] <span class="op">=</span> pd.to_datetime(consumo[<span class="st">'Fecha'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">'%m-%Y'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="106">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>consumo[<span class="st">'AÑO'</span>] <span class="op">=</span> consumo[<span class="st">'Fecha'</span>].dt.year</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>consumo[<span class="st">'MES'</span>] <span class="op">=</span> consumo[<span class="st">'Fecha'</span>].dt.month</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>grupo <span class="op">=</span> consumo.groupby([<span class="st">'AÑO'</span>]).mean()</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>tendencia <span class="op">=</span> grupo[cuantitativas]</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>tendencia <span class="op">=</span> tendencia.reset_index()</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> columna <span class="kw">in</span> cuantitativas:</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>    plt.plot(tendencia[<span class="st">"AÑO"</span>], tendencia[columna], label<span class="op">=</span>columna)</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Año'</span>)</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Consumo Promedio'</span>)</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Tendencia de Consumo por año'</span>)</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Juan_Avila\AppData\Local\Temp\ipykernel_21904\3096194327.py:4: FutureWarning: The default value of numeric_only in DataFrameGroupBy.mean is deprecated. In a future version, numeric_only will default to False. Either specify numeric_only or select only columns which should be valid for the function.
  grupo = consumo.groupby(['AÑO']).mean()</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-21-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Como se puede observar, el consumo total de gasolina ha aumentado considerablemente desde el 2000, casi más del doble. Es importante remarcar que el consumo del diesel ha disminuido bastante en comparación a los otros tipos de gasolina, esto se debe a que el diesel es un combustible más contaminante que los otros tipos de gasolina, por lo que se ha ido sustituyendo por otros tipos de gasolina más limpios.</p>
<div class="cell" data-execution_count="107">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>grupo <span class="op">=</span> consumo.groupby([<span class="st">'MES'</span>]).mean()</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>tendencia <span class="op">=</span> grupo[cuantitativas]</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>tendencia <span class="op">=</span> tendencia.reset_index()</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> columna <span class="kw">in</span> cuantitativas:</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    plt.plot(tendencia[<span class="st">"MES"</span>], tendencia[columna], label<span class="op">=</span>columna)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Mes'</span>)</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Consumo Promedio'</span>)</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Tendencia de consumo por mes'</span>)</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Juan_Avila\AppData\Local\Temp\ipykernel_21904\2915460692.py:1: FutureWarning: The default value of numeric_only in DataFrameGroupBy.mean is deprecated. In a future version, numeric_only will default to False. Either specify numeric_only or select only columns which should be valid for the function.
  grupo = consumo.groupby(['MES']).mean()</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-22-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Como se puede observar en el grafico, realmente el consumo de los combustibles a traves de los meses es practicamente constante, sin embargo en la linea del consumo total se puede evidenciar que en los primeros meses del año el consumo tiene unos picos en donde el precio sube ligeramente. Y el resto de los años se va manteniendo constante casi llegando al punto de incico del año siguiente.</p>
<div class="cell" data-execution_count="108">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> normaltest</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>normality_test <span class="op">=</span> consumo_numericas.<span class="bu">apply</span>(normaltest)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de test de normalidad: </span><span class="ch">\n</span><span class="st">"</span>, normality_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Resultados de test de normalidad: 
    Gasolina regular  Gasolina superior  Diesel alto azufre  \
0      3.507221e+01       2.957783e+01        3.564834e+01   
1      2.421952e-08       3.777945e-07        1.815774e-08   

   Gas licuado de petróleo         Total  
0             3.069400e+01  3.233865e+01  
1             2.162134e-07  9.500622e-08  </code></pre>
</div>
</div>
<p>Ninguna de las distribuciones de las variables interesantes es normal.</p>
</section>
</section>
<section id="importacion-de-combustible" class="level2">
<h2 class="anchored" data-anchor-id="importacion-de-combustible">1.3 - Importacion de Combustible</h2>
<section id="carga-de-datos-2" class="level3">
<h3 class="anchored" data-anchor-id="carga-de-datos-2">Carga de datos</h3>
<div class="cell" data-execution_count="109">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Info de importacion:"</span>)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargamos los datos</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>importacion <span class="op">=</span> pd.read_csv(<span class="st">'./Data/IMPORTACION.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Info de importacion:</code></pre>
</div>
</div>
</section>
<section id="análisis-exploratorio" class="level3">
<h3 class="anchored" data-anchor-id="análisis-exploratorio">Análisis exploratorio</h3>
<div class="cell" data-execution_count="110">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>importacion.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="110">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Fecha</th>
      <th>Gas licuado de petróleo</th>
      <th>Gasolina regular</th>
      <th>Gasolina superior</th>
      <th>Diesel alto azufre</th>
      <th>Total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ene-01</td>
      <td>194,065.74</td>
      <td>177,776.50</td>
      <td>373,963.96</td>
      <td>566,101.99</td>
      <td>2,312,639.05</td>
    </tr>
    <tr>
      <th>1</th>
      <td>feb-01</td>
      <td>170,703.38</td>
      <td>123,115.99</td>
      <td>243,091.07</td>
      <td>489,525.80</td>
      <td>1,769,208.76</td>
    </tr>
    <tr>
      <th>2</th>
      <td>mar-01</td>
      <td>161,837.37</td>
      <td>161,726.42</td>
      <td>312,084.38</td>
      <td>575,559.68</td>
      <td>1,945,770.26</td>
    </tr>
    <tr>
      <th>3</th>
      <td>abr-01</td>
      <td>163,048.64</td>
      <td>127,338.74</td>
      <td>285,054.89</td>
      <td>437,745.42</td>
      <td>1,623,637.76</td>
    </tr>
    <tr>
      <th>4</th>
      <td>may-01</td>
      <td>171,518.86</td>
      <td>168,730.19</td>
      <td>300,913.67</td>
      <td>552,609.13</td>
      <td>2,262,726.64</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="111">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>importacion.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 269 entries, 0 to 268
Data columns (total 6 columns):
 #   Column                   Non-Null Count  Dtype 
---  ------                   --------------  ----- 
 0   Fecha                    269 non-null    object
 1   Gas licuado de petróleo  269 non-null    object
 2   Gasolina regular         269 non-null    object
 3   Gasolina superior        269 non-null    object
 4   Diesel alto azufre       269 non-null    object
 5   Total                    269 non-null    object
dtypes: object(6)
memory usage: 12.7+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="112">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>importacion.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="112">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Fecha</th>
      <th>Gas licuado de petróleo</th>
      <th>Gasolina regular</th>
      <th>Gasolina superior</th>
      <th>Diesel alto azufre</th>
      <th>Total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>269</td>
      <td>269</td>
      <td>269</td>
      <td>269</td>
      <td>269</td>
      <td>269</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>269</td>
      <td>269</td>
      <td>269</td>
      <td>269</td>
      <td>269</td>
      <td>269</td>
    </tr>
    <tr>
      <th>top</th>
      <td>ene-01</td>
      <td>194,065.74</td>
      <td>177,776.50</td>
      <td>373,963.96</td>
      <td>566,101.99</td>
      <td>2,312,639.05</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="113">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>cuantitativas <span class="op">=</span> [<span class="st">"Gasolina regular"</span>, <span class="st">"Gasolina superior"</span>, <span class="st">"Diesel alto azufre"</span>, <span class="st">"Gas licuado de petróleo"</span>, <span class="st">"Total"</span>]</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co"># casteamos las variables a float</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> cuantitativas:</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    importacion[col] <span class="op">=</span> importacion[col].<span class="bu">str</span>.replace(<span class="st">','</span>, <span class="st">''</span>).astype(<span class="bu">float</span>)</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>importacion_numericas <span class="op">=</span> importacion[cuantitativas]</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>correlation_matrix <span class="op">=</span> importacion_numericas.corr()</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el diagrama de correlación utilizando Seaborn</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>sns.heatmap(correlation_matrix, annot<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">'coolwarm'</span>, fmt<span class="op">=</span><span class="st">'.2f'</span>, linewidths<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Diagrama de Correlación'</span>)</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-28-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="114">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> cuantitativas:</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(x <span class="op">=</span> importacion_numericas[col])</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-29-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-29-output-2.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-29-output-3.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-29-output-4.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-29-output-5.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="115">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>grid <span class="op">=</span> sns.pairplot(importacion_numericas)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-30-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="116">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>años_dict <span class="op">=</span> {</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'00'</span>: <span class="st">'2000'</span>, <span class="st">'01'</span>: <span class="st">'2001'</span>, <span class="st">'02'</span>: <span class="st">'2002'</span>, <span class="st">'03'</span>: <span class="st">'2003'</span>, <span class="st">'04'</span>: <span class="st">'2004'</span>, <span class="st">'05'</span>: <span class="st">'2005'</span>,</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'06'</span>: <span class="st">'2006'</span>, <span class="st">'07'</span>: <span class="st">'2007'</span>, <span class="st">'08'</span>: <span class="st">'2008'</span>, <span class="st">'09'</span>: <span class="st">'2009'</span>, <span class="st">'10'</span>: <span class="st">'2010'</span>, <span class="st">'11'</span>: <span class="st">'2011'</span>,</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'12'</span>: <span class="st">'2012'</span>, <span class="st">'13'</span>: <span class="st">'2013'</span>, <span class="st">'14'</span>: <span class="st">'2014'</span>, <span class="st">'15'</span>: <span class="st">'2015'</span>, <span class="st">'16'</span>: <span class="st">'2016'</span>, <span class="st">'17'</span>: <span class="st">'2017'</span>,</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'18'</span>: <span class="st">'2018'</span>, <span class="st">'19'</span>: <span class="st">'2019'</span>, <span class="st">'20'</span>: <span class="st">'2020'</span>, <span class="st">'21'</span>: <span class="st">'2021'</span>, <span class="st">'22'</span>: <span class="st">'2022'</span>, <span class="st">'23'</span>: <span class="st">'2023'</span>,</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>meses_dict <span class="op">=</span> {</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'ene'</span>: <span class="st">'01'</span>, <span class="st">'feb'</span>: <span class="st">'02'</span>, <span class="st">'mar'</span>: <span class="st">'03'</span>, <span class="st">'abr'</span>: <span class="st">'04'</span>, <span class="st">'may'</span>: <span class="st">'05'</span>, <span class="st">'jun'</span>: <span class="st">'06'</span>,</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'jul'</span>: <span class="st">'07'</span>, <span class="st">'ago'</span>: <span class="st">'08'</span>, <span class="st">'sep'</span>: <span class="st">'09'</span>, <span class="st">'oct'</span>: <span class="st">'10'</span>, <span class="st">'nov'</span>: <span class="st">'11'</span>, <span class="st">'dic'</span>: <span class="st">'12'</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> reemplazar_mes(fecha):</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>    partes <span class="op">=</span> fecha.split(<span class="st">'-'</span>)</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>    partes[<span class="dv">0</span>] <span class="op">=</span> meses_dict[partes[<span class="dv">0</span>]]</span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>    partes[<span class="dv">1</span>] <span class="op">=</span> años_dict[partes[<span class="dv">1</span>]]</span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">'-'</span>.join(partes)</span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>importacion[<span class="st">'Fecha'</span>] <span class="op">=</span> importacion[<span class="st">'Fecha'</span>].<span class="bu">apply</span>(reemplazar_mes)</span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>importacion[<span class="st">'Fecha'</span>] <span class="op">=</span> pd.to_datetime(importacion[<span class="st">'Fecha'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">'%m-%Y'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="117">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>importacion[<span class="st">'AÑO'</span>] <span class="op">=</span> importacion[<span class="st">'Fecha'</span>].dt.year</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>importacion[<span class="st">'MES'</span>] <span class="op">=</span> importacion[<span class="st">'Fecha'</span>].dt.month</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>grupo <span class="op">=</span> importacion.groupby([<span class="st">'AÑO'</span>]).mean()</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>tendencia <span class="op">=</span> grupo[cuantitativas]</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>tendencia <span class="op">=</span> tendencia.reset_index()</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> columna <span class="kw">in</span> cuantitativas:</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>    plt.plot(tendencia[<span class="st">"AÑO"</span>], tendencia[columna], label<span class="op">=</span>columna)</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Año'</span>)</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Importacion Promedio'</span>)</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Tendencia de Importacion por año'</span>)</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Juan_Avila\AppData\Local\Temp\ipykernel_21904\2456724372.py:4: FutureWarning: The default value of numeric_only in DataFrameGroupBy.mean is deprecated. In a future version, numeric_only will default to False. Either specify numeric_only or select only columns which should be valid for the function.
  grupo = importacion.groupby(['AÑO']).mean()</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-32-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Se puede observar que la importanción de combustible en todas sus presentaciones ha aumentado en los últimos años, esto se debe a que la demanda de combustible ha aumentado.</p>
<div class="cell" data-execution_count="118">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>grupo <span class="op">=</span> importacion.groupby([<span class="st">'MES'</span>]).mean()</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>tendencia <span class="op">=</span> grupo[cuantitativas]</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>tendencia <span class="op">=</span> tendencia.reset_index()</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> columna <span class="kw">in</span> cuantitativas:</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    plt.plot(tendencia[<span class="st">"MES"</span>], tendencia[columna], label<span class="op">=</span>columna)</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Mes'</span>)</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Importacion Promedio'</span>)</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Tendencia de Importacion por mes'</span>)</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Juan_Avila\AppData\Local\Temp\ipykernel_21904\2494745352.py:1: FutureWarning: The default value of numeric_only in DataFrameGroupBy.mean is deprecated. In a future version, numeric_only will default to False. Either specify numeric_only or select only columns which should be valid for the function.
  grupo = importacion.groupby(['MES']).mean()</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-33-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Se puede observar que se mantiene constante la importacion de combustibles en los meses. Y se puede observar que se importa más el diesel.</p>
<div class="cell" data-execution_count="119">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> normaltest</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>normality_test <span class="op">=</span> importacion_numericas.<span class="bu">apply</span>(normaltest)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de test de normalidad: </span><span class="ch">\n</span><span class="st">"</span>, normality_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Resultados de test de normalidad: 
    Gasolina regular  Gasolina superior  Diesel alto azufre  \
0         26.731272          27.221501            7.133463   
1          0.000002           0.000001            0.028248   

   Gas licuado de petróleo      Total  
0                25.680181  17.722492  
1                 0.000003   0.000142  </code></pre>
</div>
</div>
</section>
</section>
<section id="analisis-de-las-series" class="level2">
<h2 class="anchored" data-anchor-id="analisis-de-las-series">3. Analisis de las series</h2>
<div class="cell" data-execution_count="120">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.tsa <span class="im">as</span> tsa</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels <span class="im">as</span> sm</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.seasonal <span class="im">import</span> seasonal_decompose</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.stattools <span class="im">import</span> adfuller</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.stattools <span class="im">import</span> acf, pacf</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> tensorflow <span class="im">as</span> tf</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler</span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> keras.models <span class="im">import</span> Sequential</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> keras.layers <span class="im">import</span> Dense</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> keras.layers <span class="im">import</span> LSTM</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="121">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>tf.random.set_seed(<span class="dv">123</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>años_dict <span class="op">=</span> {</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'00'</span>: <span class="st">'2000'</span>, <span class="st">'01'</span>: <span class="st">'2001'</span>, <span class="st">'02'</span>: <span class="st">'2002'</span>, <span class="st">'03'</span>: <span class="st">'2003'</span>, <span class="st">'04'</span>: <span class="st">'2004'</span>, <span class="st">'05'</span>: <span class="st">'2005'</span>,</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'06'</span>: <span class="st">'2006'</span>, <span class="st">'07'</span>: <span class="st">'2007'</span>, <span class="st">'08'</span>: <span class="st">'2008'</span>, <span class="st">'09'</span>: <span class="st">'2009'</span>, <span class="st">'10'</span>: <span class="st">'2010'</span>, <span class="st">'11'</span>: <span class="st">'2011'</span>,</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'12'</span>: <span class="st">'2012'</span>, <span class="st">'13'</span>: <span class="st">'2013'</span>, <span class="st">'14'</span>: <span class="st">'2014'</span>, <span class="st">'15'</span>: <span class="st">'2015'</span>, <span class="st">'16'</span>: <span class="st">'2016'</span>, <span class="st">'17'</span>: <span class="st">'2017'</span>,</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'18'</span>: <span class="st">'2018'</span>, <span class="st">'19'</span>: <span class="st">'2019'</span>, <span class="st">'20'</span>: <span class="st">'2020'</span>, <span class="st">'21'</span>: <span class="st">'2021'</span>, <span class="st">'22'</span>: <span class="st">'2022'</span>, <span class="st">'23'</span>: <span class="st">'2023'</span>,</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>meses_dict <span class="op">=</span> {</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'ene'</span>: <span class="st">'01'</span>, <span class="st">'feb'</span>: <span class="st">'02'</span>, <span class="st">'mar'</span>: <span class="st">'03'</span>, <span class="st">'abr'</span>: <span class="st">'04'</span>, <span class="st">'may'</span>: <span class="st">'05'</span>, <span class="st">'jun'</span>: <span class="st">'06'</span>,</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'jul'</span>: <span class="st">'07'</span>, <span class="st">'ago'</span>: <span class="st">'08'</span>, <span class="st">'sep'</span>: <span class="st">'09'</span>, <span class="st">'oct'</span>: <span class="st">'10'</span>, <span class="st">'nov'</span>: <span class="st">'11'</span>, <span class="st">'dic'</span>: <span class="st">'12'</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> dateparse(fecha):</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>    partes <span class="op">=</span> fecha.split(<span class="st">'-'</span>)</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>    partes[<span class="dv">0</span>] <span class="op">=</span> meses_dict[partes[<span class="dv">0</span>]]</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>    partes[<span class="dv">1</span>] <span class="op">=</span> años_dict[partes[<span class="dv">1</span>]]</span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.to_datetime(<span class="st">'-'</span>.join(partes), <span class="bu">format</span><span class="op">=</span><span class="st">'%m-%Y'</span>)</span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>consumo <span class="op">=</span> pd.read_csv(<span class="st">'./Data/CONSUMO.csv'</span>, parse_dates<span class="op">=</span>[<span class="st">'Fecha'</span>], index_col<span class="op">=</span><span class="st">'Fecha'</span>,date_parser<span class="op">=</span>dateparse)</span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span> (<span class="st">'</span><span class="ch">\n</span><span class="st"> Parsed Data:'</span>)</span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a>consumo.head()</span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a><span class="co"># casteamos las variables a float</span></span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> cuantitativas:</span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a>    consumo[col] <span class="op">=</span> consumo[col].<span class="bu">str</span>.replace(<span class="st">','</span>, <span class="st">''</span>).astype(<span class="bu">float</span>)</span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a>train_size <span class="op">=</span> <span class="bu">int</span>(<span class="bu">len</span>(consumo) <span class="op">*</span> <span class="fl">0.7</span>)</span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a>train_consumo, test_consumo <span class="op">=</span> consumo[<span class="dv">0</span>:train_size], consumo[train_size:<span class="bu">len</span>(consumo)]</span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a>tr_consumo <span class="op">=</span> train_consumo.copy()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Parsed Data:</code></pre>
</div>
</div>
<div class="cell" data-execution_count="122">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># precios_promedio</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> dateparse(fecha):</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    partes <span class="op">=</span> fecha.split(<span class="st">'-'</span>)</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    partes[<span class="dv">1</span>] <span class="op">=</span> meses_dict[partes[<span class="dv">1</span>]]</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.to_datetime(<span class="st">'-'</span>.join(partes), <span class="bu">format</span><span class="op">=</span><span class="st">'</span><span class="sc">%d</span><span class="st">-%m-%y'</span>)</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>precios_promedio_2021 <span class="op">=</span> pd.read_csv(<span class="st">'./Data/Precios-Promedio-Nacionales-Diarios-2021.csv'</span>, parse_dates<span class="op">=</span>[<span class="st">'FECHA'</span>], index_col<span class="op">=</span><span class="st">'FECHA'</span>,date_parser<span class="op">=</span>dateparse)</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>precios_promedio_2022 <span class="op">=</span> pd.read_csv(<span class="st">'./Data/Precios-Promedio-Nacionales-Diarios-2022.csv'</span>, parse_dates<span class="op">=</span>[<span class="st">'FECHA'</span>], index_col<span class="op">=</span><span class="st">'FECHA'</span>,date_parser<span class="op">=</span>dateparse)</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>precios_promedio_2023 <span class="op">=</span> pd.read_csv(<span class="st">'./Data/Precios-Promedio-Nacionales-Diarios-2023.csv'</span>, parse_dates<span class="op">=</span>[<span class="st">'FECHA'</span>], index_col<span class="op">=</span><span class="st">'FECHA'</span>,date_parser<span class="op">=</span>dateparse)</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>pp <span class="op">=</span> pd.concat([precios_promedio_2021, precios_promedio_2022, precios_promedio_2023])</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Se eliminan las columnas que no se van a utilizar</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>pp <span class="op">=</span> pp.drop(columns<span class="op">=</span>[<span class="st">'Bunker'</span>])</span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span> (<span class="st">'</span><span class="ch">\n</span><span class="st"> Parsed Data:'</span>)</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>train_size <span class="op">=</span> <span class="bu">int</span>(<span class="bu">len</span>(pp) <span class="op">*</span> <span class="fl">0.7</span>)</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>train_precios, test_precios <span class="op">=</span> pp[<span class="dv">0</span>:train_size], pp[train_size:(<span class="bu">len</span>(pp))]</span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>tr_precios <span class="op">=</span> train_precios.copy()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Parsed Data:</code></pre>
</div>
</div>
<section id="consumo-mensual-gasolina-regular" class="level3">
<h3 class="anchored" data-anchor-id="consumo-mensual-gasolina-regular">3.1 Consumo mensual gasolina regular</h3>
<div class="cell" data-execution_count="123">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>cuantitativas <span class="op">=</span> [<span class="st">'Gas licuado de petróleo'</span>, <span class="st">'Gasolina regular'</span>, <span class="st">'Gasolina superior'</span>, <span class="st">'Diesel alto azufre'</span>, <span class="st">'Total'</span>]</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>plt.plot(tr_consumo.index, tr_consumo[<span class="st">'Gasolina regular'</span>], label<span class="op">=</span><span class="st">'Gasolina regular'</span>)</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>plt.gca().<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Consumo de Combustible'</span>, ylabel<span class="op">=</span><span class="st">'Consumo'</span>, xlabel<span class="op">=</span><span class="st">'Año'</span>)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-38-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="124">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se calcula la media movil y desviacion estandar movil</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co"># for column in cuantitativas:</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>mediaMovil <span class="op">=</span> tr_consumo[<span class="st">'Gasolina regular'</span>].rolling(window<span class="op">=</span><span class="dv">12</span>).mean()</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>desviacionMovil <span class="op">=</span> tr_consumo[<span class="st">'Gasolina regular'</span>].rolling(window<span class="op">=</span><span class="dv">12</span>).std()</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>original <span class="op">=</span> plt.plot(tr_consumo[<span class="st">'Gasolina regular'</span>], color<span class="op">=</span><span class="st">'blue'</span>, label<span class="op">=</span><span class="st">'Original'</span>)</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>media <span class="op">=</span> plt.plot(mediaMovil, color<span class="op">=</span><span class="st">'red'</span>, label<span class="op">=</span><span class="st">'Media Movil'</span>)</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>desviacion <span class="op">=</span> plt.plot(desviacionMovil, color<span class="op">=</span><span class="st">'green'</span>, label<span class="op">=</span><span class="st">'Desviacion Estandar Movil'</span>)</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'best'</span>)</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Media y Desviacion Estandar Movil'</span>)</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>plt.show(block<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-39-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="125">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>descomposition <span class="op">=</span> seasonal_decompose(tr_consumo[<span class="st">'Gasolina regular'</span>])</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>descomposition.plot()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="125">
<p><img src="Laboratorio2_files/figure-html/cell-40-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-40-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="126">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>consumo_log <span class="op">=</span> tr_consumo.copy()</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co"># for column in cuantitativas:</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>consumo_log[<span class="st">'Gasolina regular'</span>] <span class="op">=</span> np.log(consumo_log[<span class="st">'Gasolina regular'</span>])</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>plt.plot(consumo_log[<span class="st">'Gasolina regular'</span>])</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Gasolina regular'</span>)</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-41-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="127">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># for column in cuantitativas:</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Resultados del Test de Dicker-Fuller para la variable Gasolina regular'</span>)</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>dfTest <span class="op">=</span> adfuller(tr_consumo[<span class="st">'Gasolina regular'</span>], autolag<span class="op">=</span><span class="st">'AIC'</span>)</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>salidaDf <span class="op">=</span> pd.Series(dfTest[<span class="dv">0</span>:<span class="dv">4</span>], index<span class="op">=</span>[<span class="st">'Estadístico de prueba'</span>,<span class="st">'p-value'</span>,<span class="st">'# de retardos usados'</span>,<span class="st">'# de observaciones usadas'</span>])</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> key,value <span class="kw">in</span> dfTest[<span class="dv">4</span>].items():</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>        salidaDf[<span class="st">'Critical Value (</span><span class="sc">%s</span><span class="st">)'</span><span class="op">%</span>key] <span class="op">=</span> value</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(salidaDf)</span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Resultados del Test de Dicker-Fuller para la variable Gasolina regular
Estadístico de prueba          2.335407
p-value                        0.998977
# de retardos usados          12.000000
# de observaciones usadas    183.000000
Critical Value (1%)           -3.466598
Critical Value (5%)           -2.877467
Critical Value (10%)          -2.575260
dtype: float64</code></pre>
</div>
</div>
<p>El p-value es mayor a 0.05 por lo que no se puede rechazar la hipótesis nula de que existen raices unitarias. La serie no es estacionaria en media.</p>
<div class="cell" data-execution_count="128">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>consumo_diff <span class="op">=</span> tr_consumo.diff()</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>consumo_diff.dropna(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co"># for column in cuantitativas:</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Resultados del Test de Dickey Fuller para una diferenciación de la serie'</span>)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>dfTest <span class="op">=</span> adfuller(consumo_diff[<span class="st">'Gasolina regular'</span>])</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>salidaDf <span class="op">=</span> pd.Series(dfTest[<span class="dv">0</span>:<span class="dv">4</span>], index<span class="op">=</span>[<span class="st">'Estadístico de prueba'</span>,<span class="st">'p-value'</span>,<span class="st">'# de retardos usados'</span>,<span class="st">'# de observaciones usadas'</span>])</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> key,value <span class="kw">in</span> dfTest[<span class="dv">4</span>].items():</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>        salidaDf[<span class="st">'Critical Value (</span><span class="sc">%s</span><span class="st">)'</span><span class="op">%</span>key] <span class="op">=</span> value</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(salidaDf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Resultados del Test de Dickey Fuller para una diferenciación de la serie
Estadístico de prueba         -3.948106
p-value                        0.001708
# de retardos usados          11.000000
# de observaciones usadas    183.000000
Critical Value (1%)           -3.466598
Critical Value (5%)           -2.877467
Critical Value (10%)          -2.575260
dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="129">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># for column in cuantitativas:</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>plt.plot(consumo_diff[<span class="st">'Gasolina regular'</span>], label<span class="op">=</span><span class="st">'Gasolina regular'</span>)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Gasolina regular'</span>)</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-44-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="130">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># for column in cuantitativas:</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>plt.plot(consumo_log[<span class="st">'Gasolina regular'</span>].diff().diff())</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Gasolina regular'</span>)</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-45-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="131">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>consumo_log_diff <span class="op">=</span> pd.DataFrame(columns <span class="op">=</span> cuantitativas)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="co"># for column in cuantitativas:</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>consumo_log_diff_act <span class="op">=</span> consumo_log[<span class="st">'Gasolina regular'</span>].diff().diff()</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>consumo_log_diff_act.dropna(inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>consumo_log_diff[<span class="st">'Gasolina regular'</span>] <span class="op">=</span> consumo_log_diff_act</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>tsa_acf <span class="op">=</span> acf(consumo_log_diff_act, nlags<span class="op">=</span><span class="dv">5</span>,fft<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>tsa_pacf <span class="op">=</span> pacf(consumo_log_diff_act, nlags<span class="op">=</span><span class="dv">36</span>)</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="132">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot ACF: </span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co"># for column in cuantitativas:</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> [<span class="dv">15</span>, <span class="dv">5</span>]</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.dpi'</span>] <span class="op">=</span> <span class="dv">100</span> <span class="co"># 200 e.g. is really fine, but slower</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>) </span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>plt.plot(acf(consumo_log_diff[<span class="st">'Gasolina regular'</span>],nlags<span class="op">=</span><span class="dv">12</span>,fft<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina regular'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina regular'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación con 12 retardos'</span>)</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>) </span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>plt.plot(acf(consumo_log_diff[<span class="st">'Gasolina regular'</span>],nlags<span class="op">=</span><span class="dv">5</span>,fft<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina regular'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina regular'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación con 5 retardos'</span>)</span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-47-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="133">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co">#plot PACF</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="co"># for column in cuantitativas:</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>)</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>plt.plot(pacf(consumo_log_diff[<span class="st">'Gasolina regular'</span>], nlags<span class="op">=</span><span class="dv">36</span>))</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina regular'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina regular'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación Parcial 36 retardos'</span>)</span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>)</span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>plt.plot(pacf(consumo_log_diff[<span class="st">'Gasolina regular'</span>], nlags<span class="op">=</span><span class="dv">5</span>))</span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina regular'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina regular'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación Parcial 5 retardos'</span>)</span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> [<span class="dv">15</span>, <span class="dv">5</span>]</span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.dpi'</span>] <span class="op">=</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-48-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="134">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>plt.plot(acf(consumo_log_diff[<span class="st">'Gasolina regular'</span>],nlags<span class="op">=</span><span class="dv">36</span>,fft<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina regular'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina regular'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación con 36 retardos'</span>)</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> [<span class="dv">15</span>, <span class="dv">5</span>]</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.dpi'</span>] <span class="op">=</span> <span class="dv">100</span> <span class="co"># 200 e.g. is really fine, but slower</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-49-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Como se puede observar el comportamiento es similar para 12, 24, 36 meses por lo que hay una correlación entre los años, eso indica que hay estacionalidad cada 12 meses. Deberíamos agregarle el componente estacional</p>
<div class="cell" data-execution_count="135">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>consumo_log_D <span class="op">=</span> consumo_log.diff(<span class="dv">12</span>)</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>consumo_log_D.dropna(inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="136">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>plt.plot(pacf(consumo_log_D[<span class="st">'Gasolina regular'</span>], nlags<span class="op">=</span><span class="dv">5</span>))</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_D[<span class="st">'Gasolina regular'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_D[<span class="st">'Gasolina regular'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación Parcial 5 retardos'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="136">
<pre><code>Text(0.5, 1.0, 'Función de Autocorrelación Parcial 5 retardos')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-51-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Luego de hacer la diferenciacion se puede ver que se anulan los coeficientes despues de p = 4. Se probara con p = 4, d = 3, q = 2</p>
<div class="cell" data-execution_count="137">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.statespace.sarimax <span class="im">import</span> SARIMAX</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>modelo141 <span class="op">=</span> SARIMAX(consumo_log[<span class="st">'Gasolina regular'</span>], order<span class="op">=</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">1</span>), seasonal_order<span class="op">=</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">12</span>), enforce_stationarity<span class="op">=</span><span class="va">False</span>, enforce_invertibility<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>resultado_m141 <span class="op">=</span> modelo141.fit()</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(resultado_m141.summary().tables[<span class="dv">1</span>])</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>resultado_m141.plot_diagnostics(figsize<span class="op">=</span>(<span class="dv">18</span>, <span class="dv">8</span>))</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de AIC (Akaike information criterion)"</span>)</span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Modelo 141="</span>,resultado_m141.aic)</span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de BIC (Bayesian information criterion)"</span>)</span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Modelo 141="</span>,resultado_m141.bic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)
c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
ar.L1         -0.6864      0.062    -11.108      0.000      -0.808      -0.565
ma.L1         -1.0000    111.256     -0.009      0.993    -219.057     217.057
ar.S.L12      -0.6064      0.074     -8.226      0.000      -0.751      -0.462
ar.S.L24      -0.2746      0.074     -3.721      0.000      -0.419      -0.130
sigma2         0.0384      4.275      0.009      0.993      -8.340       8.416
==============================================================================</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-52-output-3.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Resultados de AIC (Akaike information criterion)
Modelo 141= -50.54617542041347
Resultados de BIC (Bayesian information criterion)
Modelo 141= -35.32904983581724</code></pre>
</div>
</div>
<p>Los residuos de las columnas tienen una distribucion normal y en el correlograma hay pocas autocorrelaciones significativas, por lo que se puede decir que el modelo es bueno.</p>
<div class="cell" data-execution_count="138">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.statespace.sarimax <span class="im">import</span> SARIMAX</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>modelo441 <span class="op">=</span> SARIMAX(consumo_log[<span class="st">'Gasolina regular'</span>], order<span class="op">=</span>(<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">1</span>), seasonal_order<span class="op">=</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">12</span>), enforce_stationarity<span class="op">=</span><span class="va">False</span>, enforce_invertibility<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>resultado_m441 <span class="op">=</span> modelo441.fit()</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(resultado_m441.summary().tables[<span class="dv">1</span>])</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>resultado_m441.plot_diagnostics(figsize<span class="op">=</span>(<span class="dv">18</span>, <span class="dv">8</span>))</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de AIC (Akaike information criterion)"</span>)</span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Modelo 441="</span>,resultado_m441.aic)</span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de BIC (Bayesian information criterion)"</span>)</span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Modelo 441="</span>,resultado_m441.bic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)
c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
ar.L1         -1.5651      0.077    -20.396      0.000      -1.715      -1.415
ar.L2         -1.5190      0.139    -10.955      0.000      -1.791      -1.247
ar.L3         -0.8872      0.138     -6.420      0.000      -1.158      -0.616
ar.L4         -0.3731      0.088     -4.217      0.000      -0.547      -0.200
ma.L1         -1.0000    148.118     -0.007      0.995    -291.305     289.305
ar.S.L12      -0.6123      0.081     -7.597      0.000      -0.770      -0.454
ar.S.L24      -0.2942      0.082     -3.575      0.000      -0.455      -0.133
sigma2         0.0152      2.255      0.007      0.995      -4.404       4.435
==============================================================================</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-53-output-3.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Resultados de AIC (Akaike information criterion)
Modelo 441= -183.74537376482712
Resultados de BIC (Bayesian information criterion)
Modelo 441= -159.5543295980569</code></pre>
</div>
</div>
<p>Basándonos en estos resultados, el Modelo 441 sería considerado el mejor modelo de los dos, ya que tiene un mejor ajuste a los datos según el criterio de información de AIC</p>
<section id="prediccion-con-el-modelo-441" class="level4">
<h4 class="anchored" data-anchor-id="prediccion-con-el-modelo-441">Prediccion con el modelo 441</h4>
<div class="cell" data-execution_count="139">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>modelo441 <span class="op">=</span> SARIMAX(consumo_log[<span class="st">'Gasolina regular'</span>], order<span class="op">=</span>(<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">1</span>), seasonal_order<span class="op">=</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">12</span>), enforce_stationarity<span class="op">=</span><span class="va">False</span>, enforce_invertibility<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>resultado_m441 <span class="op">=</span> modelo441.fit()</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>pred <span class="op">=</span> resultado_m441.get_prediction(start<span class="op">=</span>test_consumo[<span class="st">'Gasolina regular'</span>][<span class="st">'2021'</span>:].index[<span class="dv">0</span>], dynamic<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>pred_ci <span class="op">=</span> pred.conf_int()</span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> test_consumo[<span class="st">'Gasolina regular'</span>][<span class="st">'2021'</span>:].plot(label<span class="op">=</span><span class="st">'observed'</span>)</span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>pred.predicted_mean.plot(ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">'One-step ahead Forecast'</span>, alpha<span class="op">=</span><span class="fl">.7</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">4</span>))</span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>ax.fill_between( pred_ci.iloc[:,<span class="dv">0</span>],</span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>                pred_ci.iloc[:,<span class="dv">1</span>], color<span class="op">=</span><span class="st">'k'</span>, alpha<span class="op">=</span><span class="fl">.2</span>)</span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.xlim(test_consumo[column]['2023':].index[0], pred_ci.index[-1])</span></span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Consumo de Gasolina regular'</span>)</span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)
c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-54-output-2.png" class="img-fluid"></p>
</div>
</div>
<section id="section" class="level5">
<h5 class="anchored" data-anchor-id="section">2021 - 2023</h5>
<p>Se puede observar que se predice que el consumo de gasolina regular va a aumentando levemente desde el 2021. Es una predicción acertada ya que el consumo de gasolina sí ha aumentado con el aumento de vehículos que hay cada año en el país.</p>
<div class="cell" data-execution_count="140">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>modelo441 <span class="op">=</span> SARIMAX(consumo_log[<span class="st">'Gasolina regular'</span>], order<span class="op">=</span>(<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">1</span>), seasonal_order<span class="op">=</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">12</span>), enforce_stationarity<span class="op">=</span><span class="va">False</span>, enforce_invertibility<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>resultado_m441 <span class="op">=</span> modelo441.fit()</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>pred <span class="op">=</span> resultado_m441.get_prediction(start<span class="op">=</span>test_consumo[<span class="st">'Gasolina regular'</span>][<span class="st">'2023'</span>:].index[<span class="dv">0</span>], dynamic<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>pred_ci <span class="op">=</span> pred.conf_int()</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> test_consumo[<span class="st">'Gasolina regular'</span>][<span class="st">'2023'</span>:].plot(label<span class="op">=</span><span class="st">'observed'</span>)</span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>pred.predicted_mean.plot(ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">'One-step ahead Forecast'</span>, alpha<span class="op">=</span><span class="fl">.7</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">4</span>))</span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Consumo de Gasolina regular'</span>)</span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)
c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-55-output-2.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="section-1" class="level5">
<h5 class="anchored" data-anchor-id="section-1">2023</h5>
<p>Segun la prediccion, el consumo de gasolina regular sera constante en el año 2023, con un leve aumento lo que concuerda con los valores reales analizados en el análisis exploratorio de datos.</p>
</section>
</section>
</section>
<section id="consumo-mensual-gasolina-superior" class="level3">
<h3 class="anchored" data-anchor-id="consumo-mensual-gasolina-superior">3.2 Consumo mensual gasolina superior</h3>
<div class="cell" data-execution_count="141">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>plt.plot(tr_consumo.index, tr_consumo[<span class="st">'Gasolina superior'</span>], label<span class="op">=</span><span class="st">'Gasolina superior'</span>)</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>plt.gca().<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Consumo de Combustible'</span>, ylabel<span class="op">=</span><span class="st">'Consumo'</span>, xlabel<span class="op">=</span><span class="st">'Año'</span>)</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-56-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="142">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>mediaMovil <span class="op">=</span> tr_consumo[<span class="st">'Gasolina superior'</span>].rolling(window<span class="op">=</span><span class="dv">12</span>).mean()</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>desviacionMovil <span class="op">=</span> tr_consumo[<span class="st">'Gasolina superior'</span>].rolling(window<span class="op">=</span><span class="dv">12</span>).std()</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>original <span class="op">=</span> plt.plot(tr_consumo[<span class="st">'Gasolina superior'</span>], color<span class="op">=</span><span class="st">'blue'</span>, label<span class="op">=</span><span class="st">'Original'</span>)</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>media <span class="op">=</span> plt.plot(mediaMovil, color<span class="op">=</span><span class="st">'red'</span>, label<span class="op">=</span><span class="st">'Media Movil'</span>)</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>desviacion <span class="op">=</span> plt.plot(desviacionMovil, color<span class="op">=</span><span class="st">'green'</span>, label<span class="op">=</span><span class="st">'Desviacion Estandar Movil'</span>)</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'best'</span>)</span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Media y Desviacion Estandar Movil'</span>)</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>plt.show(block<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-57-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="143">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>descomposition <span class="op">=</span> seasonal_decompose(tr_consumo[<span class="st">'Gasolina superior'</span>])</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>descomposition.plot()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="143">
<p><img src="Laboratorio2_files/figure-html/cell-58-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-58-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="144">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>consumo_log <span class="op">=</span> tr_consumo.copy()</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="co"># for column in cuantitativas:</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>consumo_log[<span class="st">'Gasolina superior'</span>] <span class="op">=</span> np.log(consumo_log[<span class="st">'Gasolina superior'</span>])</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>plt.plot(consumo_log[<span class="st">'Gasolina superior'</span>])</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Gasolina superior'</span>)</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-59-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="145">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Resultados del Test de Dicker-Fuller para la variable Gasolina superior'</span>)</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>dfTest <span class="op">=</span> adfuller(tr_consumo[<span class="st">'Gasolina superior'</span>], autolag<span class="op">=</span><span class="st">'AIC'</span>)</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>salidaDf <span class="op">=</span> pd.Series(dfTest[<span class="dv">0</span>:<span class="dv">4</span>], index<span class="op">=</span>[<span class="st">'Estadístico de prueba'</span>,<span class="st">'p-value'</span>,<span class="st">'# de retardos usados'</span>,<span class="st">'# de observaciones usadas'</span>])</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> key,value <span class="kw">in</span> dfTest[<span class="dv">4</span>].items():</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>        salidaDf[<span class="st">'Critical Value (</span><span class="sc">%s</span><span class="st">)'</span><span class="op">%</span>key] <span class="op">=</span> value</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(salidaDf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Resultados del Test de Dicker-Fuller para la variable Gasolina superior
Estadístico de prueba          0.466725
p-value                        0.983826
# de retardos usados          12.000000
# de observaciones usadas    183.000000
Critical Value (1%)           -3.466598
Critical Value (5%)           -2.877467
Critical Value (10%)          -2.575260
dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="146">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>consumo_diff <span class="op">=</span> tr_consumo.diff()</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>consumo_diff.dropna(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="co"># for column in cuantitativas:</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Resultados del Test de Dickey Fuller para una diferenciación de la serie'</span>)</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>dfTest <span class="op">=</span> adfuller(consumo_diff[<span class="st">'Gasolina superior'</span>])</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>salidaDf <span class="op">=</span> pd.Series(dfTest[<span class="dv">0</span>:<span class="dv">4</span>], index<span class="op">=</span>[<span class="st">'Estadístico de prueba'</span>,<span class="st">'p-value'</span>,<span class="st">'# de retardos usados'</span>,<span class="st">'# de observaciones usadas'</span>])</span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> key,value <span class="kw">in</span> dfTest[<span class="dv">4</span>].items():</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>        salidaDf[<span class="st">'Critical Value (</span><span class="sc">%s</span><span class="st">)'</span><span class="op">%</span>key] <span class="op">=</span> value</span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(salidaDf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Resultados del Test de Dickey Fuller para una diferenciación de la serie
Estadístico de prueba         -4.253410
p-value                        0.000534
# de retardos usados          11.000000
# de observaciones usadas    183.000000
Critical Value (1%)           -3.466598
Critical Value (5%)           -2.877467
Critical Value (10%)          -2.575260
dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="147">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>plt.plot(consumo_diff[<span class="st">'Gasolina superior'</span>], label<span class="op">=</span><span class="st">'Gasolina superior'</span>)</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Gasolina superior'</span>)</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-62-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="148">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>plt.plot(consumo_log[<span class="st">'Gasolina superior'</span>].diff().diff())</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Gasolina superior'</span>)</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-63-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="149">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>consumo_log_diff <span class="op">=</span> pd.DataFrame(columns <span class="op">=</span> cuantitativas)</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>consumo_log_diff_act <span class="op">=</span> consumo_log[<span class="st">'Gasolina superior'</span>].diff().diff()</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>consumo_log_diff_act.dropna(inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>consumo_log_diff[<span class="st">'Gasolina superior'</span>] <span class="op">=</span> consumo_log_diff_act</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>tsa_acf <span class="op">=</span> acf(consumo_log_diff_act, nlags<span class="op">=</span><span class="dv">5</span>,fft<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>tsa_pacf <span class="op">=</span> pacf(consumo_log_diff_act, nlags<span class="op">=</span><span class="dv">36</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="150">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot ACF: </span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> [<span class="dv">15</span>, <span class="dv">5</span>]</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.dpi'</span>] <span class="op">=</span> <span class="dv">100</span> <span class="co"># 200 e.g. is really fine, but slower</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>) </span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>plt.plot(acf(consumo_log_diff[<span class="st">'Gasolina superior'</span>],nlags<span class="op">=</span><span class="dv">12</span>,fft<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación con 12 retardos'</span>)</span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>) </span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>plt.plot(acf(consumo_log_diff[<span class="st">'Gasolina superior'</span>],nlags<span class="op">=</span><span class="dv">5</span>,fft<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb94-17"><a href="#cb94-17" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación con 5 retardos'</span>)</span>
<span id="cb94-18"><a href="#cb94-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-19"><a href="#cb94-19" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-65-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="151">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co">#plot PACF</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>)</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>plt.plot(pacf(consumo_log_diff[<span class="st">'Gasolina superior'</span>], nlags<span class="op">=</span><span class="dv">36</span>))</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación Parcial 36 retardos'</span>)</span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>)</span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a>plt.plot(pacf(consumo_log_diff[<span class="st">'Gasolina superior'</span>], nlags<span class="op">=</span><span class="dv">5</span>))</span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb95-15"><a href="#cb95-15" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación Parcial 5 retardos'</span>)</span>
<span id="cb95-16"><a href="#cb95-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-17"><a href="#cb95-17" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> [<span class="dv">15</span>, <span class="dv">5</span>]</span>
<span id="cb95-18"><a href="#cb95-18" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.dpi'</span>] <span class="op">=</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-66-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="152">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>plt.plot(acf(consumo_log_diff[<span class="st">'Gasolina superior'</span>],nlags<span class="op">=</span><span class="dv">36</span>,fft<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_diff[<span class="st">'Gasolina superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación con 36 retardos'</span>)</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> [<span class="dv">15</span>, <span class="dv">5</span>]</span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.dpi'</span>] <span class="op">=</span> <span class="dv">100</span> <span class="co"># 200 e.g. is really fine, but slower</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-67-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="153">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>consumo_log_D <span class="op">=</span> consumo_log.diff(<span class="dv">12</span>)</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>consumo_log_D.dropna(inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="154">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>plt.plot(pacf(consumo_log_D[<span class="st">'Gasolina regular'</span>], nlags<span class="op">=</span><span class="dv">5</span>))</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_D[<span class="st">'Gasolina regular'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(consumo_log_D[<span class="st">'Gasolina regular'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación Parcial 5 retardos'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="154">
<pre><code>Text(0.5, 1.0, 'Función de Autocorrelación Parcial 5 retardos')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-69-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Luego de hacer la diferenciacion se puede ver que se anulan los coeficientes despues de p = 4. Se probara con p = 4, d = 3, q = 2</p>
<div class="cell" data-execution_count="155">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.statespace.sarimax <span class="im">import</span> SARIMAX</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>modelo141 <span class="op">=</span> SARIMAX(consumo_log[<span class="st">'Gasolina superior'</span>], order<span class="op">=</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">1</span>), seasonal_order<span class="op">=</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">12</span>), enforce_stationarity<span class="op">=</span><span class="va">False</span>, enforce_invertibility<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>resultado_m141 <span class="op">=</span> modelo141.fit()</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(resultado_m141.summary().tables[<span class="dv">1</span>])</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>resultado_m141.plot_diagnostics(figsize<span class="op">=</span>(<span class="dv">18</span>, <span class="dv">8</span>))</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)
c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
ar.L1         -0.6704      0.056    -12.065      0.000      -0.779      -0.562
ma.L1         -1.0000    192.729     -0.005      0.996    -378.741     376.741
ar.S.L12      -0.5697      0.067     -8.440      0.000      -0.702      -0.437
ar.S.L24      -0.3047      0.089     -3.442      0.001      -0.478      -0.131
sigma2         0.0220      4.233      0.005      0.996      -8.274       8.318
==============================================================================</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-70-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="156">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.statespace.sarimax <span class="im">import</span> SARIMAX</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>modelo441 <span class="op">=</span> SARIMAX(consumo_log[<span class="st">'Gasolina superior'</span>], order<span class="op">=</span>(<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">1</span>), seasonal_order<span class="op">=</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">12</span>), enforce_stationarity<span class="op">=</span><span class="va">False</span>, enforce_invertibility<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>resultado_m441 <span class="op">=</span> modelo441.fit()</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(resultado_m441.summary().tables[<span class="dv">1</span>])</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>resultado_m441.plot_diagnostics(figsize<span class="op">=</span>(<span class="dv">18</span>, <span class="dv">8</span>))</span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de AIC (Akaike information criterion)"</span>)</span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Modelo 441="</span>,resultado_m441.aic)</span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de BIC (Bayesian information criterion)"</span>)</span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Modelo 441="</span>,resultado_m441.bic)</span>
<span id="cb103-14"><a href="#cb103-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-15"><a href="#cb103-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de AIC (Akaike information criterion)"</span>)</span>
<span id="cb103-16"><a href="#cb103-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Modelo 141="</span>,resultado_m141.aic)</span>
<span id="cb103-17"><a href="#cb103-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de BIC (Bayesian information criterion)"</span>)</span>
<span id="cb103-18"><a href="#cb103-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Modelo 141="</span>,resultado_m141.bic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)
c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
ar.L1         -1.5881      0.078    -20.475      0.000      -1.740      -1.436
ar.L2         -1.6025      0.151    -10.599      0.000      -1.899      -1.306
ar.L3         -0.9805      0.151     -6.482      0.000      -1.277      -0.684
ar.L4         -0.3752      0.090     -4.148      0.000      -0.553      -0.198
ma.L1         -1.0000   7845.337     -0.000      1.000   -1.54e+04    1.54e+04
ar.S.L12      -0.5685      0.064     -8.848      0.000      -0.694      -0.443
ar.S.L24      -0.3472      0.093     -3.733      0.000      -0.529      -0.165
sigma2         0.0085     66.709      0.000      1.000    -130.739     130.756
==============================================================================</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-71-output-3.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Resultados de AIC (Akaike information criterion)
Modelo 441= -272.2222825891066
Resultados de BIC (Bayesian information criterion)
Modelo 441= -248.0312384223364
Resultados de AIC (Akaike information criterion)
Modelo 141= -137.06345303440986
Resultados de BIC (Bayesian information criterion)
Modelo 141= -121.84632744981363</code></pre>
</div>
</div>
<section id="mejor-modelo" class="level5">
<h5 class="anchored" data-anchor-id="mejor-modelo">mejor modelo</h5>
<p>El mejor modelo es el 441 ya que tiene un mejor ajuste a los datos según el criterio de información de AIC y BIC.</p>
</section>
<section id="prediccion-con-el-modelo-441-1" class="level4">
<h4 class="anchored" data-anchor-id="prediccion-con-el-modelo-441-1">Prediccion con el modelo 441</h4>
<div class="cell" data-execution_count="157">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>modelo441 <span class="op">=</span> SARIMAX(consumo_log[<span class="st">'Gasolina superior'</span>], order<span class="op">=</span>(<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">1</span>), seasonal_order<span class="op">=</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">12</span>), enforce_stationarity<span class="op">=</span><span class="va">False</span>, enforce_invertibility<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>resultado_m441 <span class="op">=</span> modelo441.fit()</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>pred <span class="op">=</span> resultado_m441.get_prediction(start<span class="op">=</span>test_consumo[<span class="st">'Gasolina superior'</span>][<span class="st">'2021'</span>:].index[<span class="dv">0</span>], dynamic<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>pred_ci <span class="op">=</span> pred.conf_int()</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> test_consumo[<span class="st">'Gasolina superior'</span>][<span class="st">'2021'</span>:].plot(label<span class="op">=</span><span class="st">'observed'</span>)</span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>pred.predicted_mean.plot(ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">'One-step ahead Forecast'</span>, alpha<span class="op">=</span><span class="fl">.7</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">4</span>))</span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>ax.fill_between( pred_ci.iloc[:,<span class="dv">0</span>],</span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a>                pred_ci.iloc[:,<span class="dv">1</span>], color<span class="op">=</span><span class="st">'k'</span>, alpha<span class="op">=</span><span class="fl">.2</span>)</span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-11"><a href="#cb107-11" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.xlim(test_consumo[column]['2023':].index[0], pred_ci.index[-1])</span></span>
<span id="cb107-12"><a href="#cb107-12" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Consumo de Gasolina superior'</span>)</span>
<span id="cb107-13"><a href="#cb107-13" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb107-14"><a href="#cb107-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)
c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-72-output-2.png" class="img-fluid"></p>
</div>
</div>
<section id="section-2" class="level5">
<h5 class="anchored" data-anchor-id="section-2">2021</h5>
<p>Como se puede observar el consumo de gasolina superior ha sido constante con una leve disminucion en el 2022, pero en el 2023 se vuelve a incrementar, algo que si concuerda con la grafica de tendencia de consumo por año realizada en el analisis exploratorio.</p>
<div class="cell" data-execution_count="159">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>modelo441 <span class="op">=</span> SARIMAX(consumo_log[<span class="st">'Gasolina superior'</span>], order<span class="op">=</span>(<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">1</span>), seasonal_order<span class="op">=</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">12</span>), enforce_stationarity<span class="op">=</span><span class="va">False</span>, enforce_invertibility<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>resultado_m441 <span class="op">=</span> modelo441.fit()</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>pred <span class="op">=</span> resultado_m441.get_prediction(start<span class="op">=</span>test_consumo[<span class="st">'Gasolina superior'</span>][<span class="st">'2023'</span>:].index[<span class="dv">0</span>], dynamic<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>pred_ci <span class="op">=</span> pred.conf_int()</span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> test_consumo[<span class="st">'Gasolina superior'</span>][<span class="st">'2023'</span>:].plot(label<span class="op">=</span><span class="st">'observed'</span>)</span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>pred.predicted_mean.plot(ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">'One-step ahead Forecast'</span>, alpha<span class="op">=</span><span class="fl">.7</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">4</span>))</span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Consumo de Gasolina superior'</span>)</span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)
c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency MS will be used.
  self._init_dates(dates, freq)</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-73-output-2.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="section-3" class="level5">
<h5 class="anchored" data-anchor-id="section-3">2023</h5>
<p>Segun la prediccion, el precio de la gasolina superior sera constante en el año 2023, con un leve aumento a final de año. Lo que concuerda con los valores reales analizados en el análisis exploratorio de datos.</p>
</section>
</section>
</section>
<section id="precios-promedio-nacionales-de-gasolina-superior" class="level3">
<h3 class="anchored" data-anchor-id="precios-promedio-nacionales-de-gasolina-superior">3.3 Precios Promedio Nacionales de gasolina superior</h3>
<div class="cell" data-execution_count="160">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>plt.plot(tr_precios.index, tr_precios[<span class="st">'Superior'</span>], label<span class="op">=</span><span class="st">'Superior'</span>)</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>plt.gca().<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Precio promedio nacional'</span>, ylabel<span class="op">=</span><span class="st">'Consumo'</span>, xlabel<span class="op">=</span><span class="st">'Año'</span>)</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-74-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="161">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>mediaMovil <span class="op">=</span> tr_precios[<span class="st">'Superior'</span>].rolling(window<span class="op">=</span><span class="dv">12</span>).mean()</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>desviacionMovil <span class="op">=</span> tr_precios[<span class="st">'Superior'</span>].rolling(window<span class="op">=</span><span class="dv">12</span>).std()</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>original <span class="op">=</span> plt.plot(tr_precios[<span class="st">'Superior'</span>], color<span class="op">=</span><span class="st">'blue'</span>, label<span class="op">=</span><span class="st">'Original'</span>)</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>media <span class="op">=</span> plt.plot(mediaMovil, color<span class="op">=</span><span class="st">'red'</span>, label<span class="op">=</span><span class="st">'Media Movil'</span>)</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>desviacion <span class="op">=</span> plt.plot(desviacionMovil, color<span class="op">=</span><span class="st">'green'</span>, label<span class="op">=</span><span class="st">'Desviacion Estandar Movil'</span>)</span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'best'</span>)</span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Media y Desviacion Estandar Movil'</span>)</span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a>plt.show(block<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-75-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="162">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>descomposition <span class="op">=</span> seasonal_decompose(tr_precios[<span class="st">'Superior'</span>])</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>descomposition.plot()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="162">
<p><img src="Laboratorio2_files/figure-html/cell-76-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-76-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="163">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>precios_log <span class="op">=</span> tr_precios.copy()</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="co"># for column in cuantitativas:</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>precios_log[<span class="st">'Superior'</span>] <span class="op">=</span> np.log(precios_log[<span class="st">'Superior'</span>])</span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>plt.plot(precios_log[<span class="st">'Superior'</span>])</span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Gasolina superior'</span>)</span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-77-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="164">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Resultados del Test de Dicker-Fuller para la variable Gasolina superior'</span>)</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>dfTest <span class="op">=</span> adfuller(tr_precios[<span class="st">'Superior'</span>], autolag<span class="op">=</span><span class="st">'AIC'</span>)</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>salidaDf <span class="op">=</span> pd.Series(dfTest[<span class="dv">0</span>:<span class="dv">4</span>], index<span class="op">=</span>[<span class="st">'Estadístico de prueba'</span>,<span class="st">'p-value'</span>,<span class="st">'# de retardos usados'</span>,<span class="st">'# de observaciones usadas'</span>])</span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> key,value <span class="kw">in</span> dfTest[<span class="dv">4</span>].items():</span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>        salidaDf[<span class="st">'Critical Value (</span><span class="sc">%s</span><span class="st">)'</span><span class="op">%</span>key] <span class="op">=</span> value</span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(salidaDf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Resultados del Test de Dicker-Fuller para la variable Gasolina superior
Estadístico de prueba         -1.777205
p-value                        0.391836
# de retardos usados           7.000000
# de observaciones usadas    655.000000
Critical Value (1%)           -3.440373
Critical Value (5%)           -2.865963
Critical Value (10%)          -2.569125
dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="165">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>precios_diff <span class="op">=</span> tr_precios.diff()</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>precios_diff.dropna(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="co"># for column in cuantitativas:</span></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Resultados del Test de Dickey Fuller para una diferenciación de la serie'</span>)</span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a>dfTest <span class="op">=</span> adfuller(precios_diff[<span class="st">'Superior'</span>])</span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>salidaDf <span class="op">=</span> pd.Series(dfTest[<span class="dv">0</span>:<span class="dv">4</span>], index<span class="op">=</span>[<span class="st">'Estadístico de prueba'</span>,<span class="st">'p-value'</span>,<span class="st">'# de retardos usados'</span>,<span class="st">'# de observaciones usadas'</span>])</span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> key,value <span class="kw">in</span> dfTest[<span class="dv">4</span>].items():</span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a>        salidaDf[<span class="st">'Critical Value (</span><span class="sc">%s</span><span class="st">)'</span><span class="op">%</span>key] <span class="op">=</span> value</span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(salidaDf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Resultados del Test de Dickey Fuller para una diferenciación de la serie
Estadístico de prueba       -7.455076e+00
p-value                      5.539811e-11
# de retardos usados         6.000000e+00
# de observaciones usadas    6.550000e+02
Critical Value (1%)         -3.440373e+00
Critical Value (5%)         -2.865963e+00
Critical Value (10%)        -2.569125e+00
dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="166">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>plt.plot(precios_diff[<span class="st">'Superior'</span>], label<span class="op">=</span><span class="st">'Gasolina superior'</span>)</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Gasolina superior'</span>)</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-80-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="167">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>plt.plot(precios_log[<span class="st">'Superior'</span>].diff().diff())</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Gasolina superior'</span>)</span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-81-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="168">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>precios_log_diff <span class="op">=</span> pd.DataFrame(columns <span class="op">=</span> cuantitativas)</span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>precios_log_diff_act <span class="op">=</span> precios_log[<span class="st">'Superior'</span>].diff().diff()</span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>precios_log_diff_act.dropna(inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>precios_log_diff[<span class="st">'Superior'</span>] <span class="op">=</span> precios_log_diff_act</span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>tsa_acf <span class="op">=</span> acf(precios_log_diff_act, nlags<span class="op">=</span><span class="dv">5</span>,fft<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>tsa_pacf <span class="op">=</span> pacf(precios_log_diff_act, nlags<span class="op">=</span><span class="dv">36</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="169">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot ACF: </span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> [<span class="dv">15</span>, <span class="dv">5</span>]</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.dpi'</span>] <span class="op">=</span> <span class="dv">100</span> <span class="co"># 200 e.g. is really fine, but slower</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>) </span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>plt.plot(acf(precios_log_diff[<span class="st">'Superior'</span>],nlags<span class="op">=</span><span class="dv">12</span>,fft<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(precios_log_diff[<span class="st">'Superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(precios_log_diff[<span class="st">'Superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación con 12 retardos'</span>)</span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>) </span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a>plt.plot(acf(precios_log_diff[<span class="st">'Superior'</span>],nlags<span class="op">=</span><span class="dv">5</span>,fft<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb122-14"><a href="#cb122-14" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb122-15"><a href="#cb122-15" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(precios_log_diff[<span class="st">'Superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb122-16"><a href="#cb122-16" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(precios_log_diff[<span class="st">'Superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb122-17"><a href="#cb122-17" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación con 5 retardos'</span>)</span>
<span id="cb122-18"><a href="#cb122-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-19"><a href="#cb122-19" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-83-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="170">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co">#plot PACF</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>)</span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>plt.plot(pacf(precios_log_diff[<span class="st">'Superior'</span>], nlags<span class="op">=</span><span class="dv">36</span>))</span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(precios_log_diff[<span class="st">'Superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(precios_log_diff[<span class="st">'Superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación Parcial 36 retardos'</span>)</span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>)</span>
<span id="cb123-11"><a href="#cb123-11" aria-hidden="true" tabindex="-1"></a>plt.plot(pacf(precios_log_diff[<span class="st">'Superior'</span>], nlags<span class="op">=</span><span class="dv">5</span>))</span>
<span id="cb123-12"><a href="#cb123-12" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb123-13"><a href="#cb123-13" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(precios_log_diff[<span class="st">'Superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb123-14"><a href="#cb123-14" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(precios_log_diff[<span class="st">'Superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb123-15"><a href="#cb123-15" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación Parcial 5 retardos'</span>)</span>
<span id="cb123-16"><a href="#cb123-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-17"><a href="#cb123-17" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> [<span class="dv">15</span>, <span class="dv">5</span>]</span>
<span id="cb123-18"><a href="#cb123-18" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.dpi'</span>] <span class="op">=</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-84-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="171">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>plt.plot(acf(precios_log_diff[<span class="st">'Superior'</span>],nlags<span class="op">=</span><span class="dv">36</span>,fft<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(precios_log_diff[<span class="st">'Superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(precios_log_diff[<span class="st">'Superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación con 36 retardos'</span>)</span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> [<span class="dv">15</span>, <span class="dv">5</span>]</span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.dpi'</span>] <span class="op">=</span> <span class="dv">100</span> <span class="co"># 200 e.g. is really fine, but slower</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-85-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="172">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>precios_log_D <span class="op">=</span> precios_log.diff(<span class="dv">12</span>)</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>precios_log_D.dropna(inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="173">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>plt.plot(pacf(precios_log_D[<span class="st">'Superior'</span>], nlags<span class="op">=</span><span class="dv">5</span>))</span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">0</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=-</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(precios_log_D[<span class="st">'Superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">1.96</span><span class="op">/</span>np.sqrt(<span class="bu">len</span>(precios_log_D[<span class="st">'Superior'</span>])),linestyle<span class="op">=</span><span class="st">'--'</span>,color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Función de Autocorrelación Parcial 5 retardos'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="173">
<pre><code>Text(0.5, 1.0, 'Función de Autocorrelación Parcial 5 retardos')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-87-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Luego de hacer la diferenciacion se puede ver que se anulan los coeficientes despues de p = 2. Se probara con p = 2, d = 1, q = 0</p>
<div class="cell" data-execution_count="174">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.statespace.sarimax <span class="im">import</span> SARIMAX</span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>modelo121 <span class="op">=</span> SARIMAX(precios_log[<span class="st">'Superior'</span>], order<span class="op">=</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>), seasonal_order<span class="op">=</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">12</span>), enforce_stationarity<span class="op">=</span><span class="va">False</span>, enforce_invertibility<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>resultado_m121 <span class="op">=</span> modelo121.fit()</span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(resultado_m121.summary().tables[<span class="dv">1</span>])</span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a>resultado_m121.plot_diagnostics(figsize<span class="op">=</span>(<span class="dv">18</span>, <span class="dv">8</span>))</span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency D will be used.
  self._init_dates(dates, freq)
c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency D will be used.
  self._init_dates(dates, freq)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
ar.L1          0.0004      0.078      0.005      0.996      -0.153       0.154
ma.L1         -1.0000      3.513     -0.285      0.776      -7.884       5.884
ar.S.L12      -0.6796      0.023    -29.425      0.000      -0.725      -0.634
ar.S.L24      -0.3137      0.023    -13.522      0.000      -0.359      -0.268
sigma2         0.0002      0.001      0.284      0.776      -0.001       0.001
==============================================================================</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-88-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="175">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.statespace.sarimax <span class="im">import</span> SARIMAX</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>modelo221 <span class="op">=</span> SARIMAX(precios_log[<span class="st">'Superior'</span>], order<span class="op">=</span>(<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">1</span>), seasonal_order<span class="op">=</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">12</span>), enforce_stationarity<span class="op">=</span><span class="va">False</span>, enforce_invertibility<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>resultado_m221 <span class="op">=</span> modelo221.fit()</span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(resultado_m221.summary().tables[<span class="dv">1</span>])</span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a>resultado_m221.plot_diagnostics(figsize<span class="op">=</span>(<span class="dv">18</span>, <span class="dv">8</span>))</span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb131-9"><a href="#cb131-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-10"><a href="#cb131-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de AIC (Akaike information criterion)"</span>)</span>
<span id="cb131-11"><a href="#cb131-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Modelo 121="</span>,resultado_m121.aic)</span>
<span id="cb131-12"><a href="#cb131-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de BIC (Bayesian information criterion)"</span>)</span>
<span id="cb131-13"><a href="#cb131-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Modelo 121="</span>,resultado_m121.bic)</span>
<span id="cb131-14"><a href="#cb131-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de AIC (Akaike information criterion)"</span>)</span>
<span id="cb131-15"><a href="#cb131-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Modelo 221="</span>,resultado_m221.aic)</span>
<span id="cb131-16"><a href="#cb131-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Resultados de BIC (Bayesian information criterion)"</span>)</span>
<span id="cb131-17"><a href="#cb131-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Modelo 221="</span>,resultado_m221.bic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency D will be used.
  self._init_dates(dates, freq)
c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\tsa\base\tsa_model.py:471: ValueWarning: No frequency information was provided, so inferred frequency D will be used.
  self._init_dates(dates, freq)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\Juan_Avila\AppData\Local\Programs\Python\Python310\lib\site-packages\statsmodels\base\model.py:604: ConvergenceWarning: Maximum Likelihood optimization failed to converge. Check mle_retvals
  warnings.warn("Maximum Likelihood optimization failed to "</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
ar.L1         -1.3649      0.028    -49.129      0.000      -1.419      -1.310
ar.L2         -1.2155      0.050    -24.455      0.000      -1.313      -1.118
ar.L3         -0.7956      0.050    -15.919      0.000      -0.894      -0.698
ar.L4         -0.2998      0.033     -9.022      0.000      -0.365      -0.235
ma.L1         -0.9997      0.318     -3.144      0.002      -1.623      -0.377
ar.S.L12      -0.6664      0.030    -22.177      0.000      -0.725      -0.607
ar.S.L24      -0.3095      0.028    -10.955      0.000      -0.365      -0.254
sigma2         0.0003   8.85e-05      3.295      0.001       0.000       0.000
==============================================================================</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-89-output-4.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Resultados de AIC (Akaike information criterion)
Modelo 121= -3663.6178397404083
Resultados de BIC (Bayesian information criterion)
Modelo 121= -3641.437087898561
Resultados de AIC (Akaike information criterion)
Modelo 221= -3260.11856580965
Resultados de BIC (Bayesian information criterion)
Modelo 221= -3224.6937236281733</code></pre>
</div>
</div>
<section id="mejor-modelo-1" class="level5">
<h5 class="anchored" data-anchor-id="mejor-modelo-1">Mejor modelo</h5>
<p>El mejor modelo es el 121 ya que tiene un mejor ajuste a los datos según el criterio de información de AIC y BIC.</p>
</section>
<section id="prediccion-con-el-modelo-121" class="level4">
<h4 class="anchored" data-anchor-id="prediccion-con-el-modelo-121">Prediccion con el modelo 121</h4>
<div class="cell" data-execution_count="176">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>pred <span class="op">=</span> resultado_m121.get_prediction(start<span class="op">=</span>test_precios[<span class="st">'Superior'</span>][<span class="st">'2021'</span>:].index[<span class="dv">0</span>], dynamic<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>pred_ci <span class="op">=</span> pred.conf_int()</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> test_precios[<span class="st">'Superior'</span>][<span class="st">'2021'</span>:].plot(label<span class="op">=</span><span class="st">'observed'</span>)</span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>pred.predicted_mean.plot(ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">'One-step ahead Forecast'</span>, alpha<span class="op">=</span><span class="fl">.7</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">4</span>))</span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a>ax.fill_between( pred_ci.iloc[:,<span class="dv">0</span>],</span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>                pred_ci.iloc[:,<span class="dv">1</span>], color<span class="op">=</span><span class="st">'k'</span>, alpha<span class="op">=</span><span class="fl">.2</span>)</span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.xlim(test_consumo[column]['2023':].index[0], pred_ci.index[-1])</span></span>
<span id="cb136-9"><a href="#cb136-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Precios de Gasolina superior'</span>)</span>
<span id="cb136-10"><a href="#cb136-10" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb136-11"><a href="#cb136-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-90-output-1.png" class="img-fluid"></p>
</div>
</div>
<section id="section-4" class="level5">
<h5 class="anchored" data-anchor-id="section-4">2021 - 2023</h5>
<p>Como se puede observar en la grafica anterior, los precios durante los ultimos tres años se han mantenido en el mismo rango de valores. Practicamente el inicio y el final de la grafica son iguales a pesar de que en el 2022 se observo una pequeña disminución.</p>
<div class="cell" data-execution_count="177">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>pred <span class="op">=</span> resultado_m121.get_prediction(start<span class="op">=</span>test_precios[<span class="st">'Superior'</span>][<span class="st">'2023'</span>:].index[<span class="dv">0</span>], dynamic<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>pred_ci <span class="op">=</span> pred.conf_int()</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> test_precios[<span class="st">'Superior'</span>][<span class="st">'2023'</span>:].plot(label<span class="op">=</span><span class="st">'observed'</span>)</span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>pred.predicted_mean.plot(ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">'One-step ahead Forecast'</span>, alpha<span class="op">=</span><span class="fl">.7</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">4</span>))</span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Precios de Gasolina superior'</span>)</span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Laboratorio2_files/figure-html/cell-91-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="section-5" class="level5">
<h5 class="anchored" data-anchor-id="section-5">2023</h5>
<p>Segun la prediccion, el precio de la gasolina superior sera constante en el año 2023, con un leve aumento a final de año. Lo que no concuerda con los valores reales analizados en el análisis exploratorio de datos, porque en lugar de disminuir lo que se veia en el analisis exploratorio sino que aumenta.</p>
</section>
</section>
</section>
<section id="comportamiento-durante-la-pandemia" class="level3">
<h3 class="anchored" data-anchor-id="comportamiento-durante-la-pandemia">6. Comportamiento durante la pandemia</h3>
<p>Se pudo observar que el consumo de la gasolina, independientemente el tipo se redujo desde el 2021, y regresó a aumentar en el 2023, ya que se detuvo el encierrro por la pandemia, y la gente volvió a salir a las calles, y por ende, a consumir gasolina. El precio también aumentó en el 2022 y eso es tanto por la pandemia como la guerra de Ucrania vs Russia en la que las petroleras tuvieron conflictos con la importación y venta de gasolina.</p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>